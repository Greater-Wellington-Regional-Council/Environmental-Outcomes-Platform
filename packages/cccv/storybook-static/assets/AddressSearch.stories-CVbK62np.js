import{_ as n,j as p,C as g}from"./ComboBox-Dx8lc8Pb.js";import"./index-RYns6xqu.js";var A={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,STORYBOOK:"true",VITE_ADDRESS_FINDER_KEY:"6HEUY89BXWKFJCRLAV7M",VITE_ADDRESS_FINDER_SECRET:"7MPCRJTGF3VEYQNKAU84",VITE_LINZ_API_KEY:"c01hxagd0vw452knjng9ex6qcvd",VITE_MAPBOX_TOKEN:"pk.eyJ1Ijoid3RjYXJ0ZXIiLCJhIjoiY2x0NGJqNjBvMDFheTJwbXRmMm9mamlxcyJ9.V7mOrpfDxldFLdh5Hf7iwA"};const d=A,o=(e,s=null)=>n.get(d,e,n.get(d,`VITE_${e}`,n.get(d,`REACT_${e}`,s))),c={LINZ_API_KEY:o("LINZ_API_KEY","missing-linz-api-key"),MAPBOX_TOKEN:o("MAPBOX_TOKEN","missing-mapbox-token"),ADDRESS_FINDER_KEY:o("ADDRESS_FINDER_KEY"),ADDRESS_FINDER_SECRET:o("ADDRESS_FINDER_SECRET")},E=async e=>{const s=new AbortController,t=setTimeout(()=>s.abort(),2e3);try{const a=await fetch(e,{signal:s.signal});return clearTimeout(t),a.ok?await a.json():null}catch(a){return{error:a}}},D={Auckland:"1","Bay of Plenty":"2",Canterbury:"3",Gisborne:"4","Hawke's Bay":"5","ManawatÅ«-Whanganui":"6",Marlborough:"7",Nelson:"8",Northland:"9",Otago:"A",Southland:"B",Taranaki:"C",Tasman:"D",Waikato:"E",Wellington:"F","West Coast":"G","Chatham Islands":"H"},R={getAddressOptions:async(e=null,s=null)=>{const t=D.Wellington,a=`https://api.addressfinder.io/api/nz/address/autocomplete/?key=${c.ADDRESS_FINDER_KEY}&q=${encodeURIComponent(e||"")}&format=json&post_box=0&strict=2&region_code=${t}&highlight=1`,i=await E(a);return!i&&s?(s(new Error("Failed to get matching addresses.  The AddressFinder service may be unavailable.")),[]):i.completions.map(l=>({label:l.a,value:l.pxid}))},getAddress:async(e,s=null)=>{const t=`https://api.addressfinder.io/api/nz/address/metadata/?key=${c.ADDRESS_FINDER_KEY}&format=json&pxid=${e.value}`,a=await E(t);return!a&&s?(s(new Error("Failed to retrieve address data.  The AddressFinder service may be unavailable.")),null):{id:a.pxid,address:a.a,latitude:a.y,longitude:a.x}}},S=e=>p.jsx(g,{label:e.label||"Search for address",placeholder:e.placeholder||"Search here",options:R.getAddressOptions,onSelect:e.onSelect,directionUp:e.directionUp}),h=S;S.__docgenInfo={description:"",methods:[],displayName:"AddressSearch",composes:["Omit"]};const b={title:"Components/AddressSearch",component:h},I=e=>p.jsx(h,{...e}),r=I.bind({});r.args={label:"Search for address",placeholder:"Search here",onSelect:e=>console.log(`label: ${e==null?void 0:e.label}, value: ${e==null?void 0:e.value}`)};var u,_,m;r.parameters={...r.parameters,docs:{...(u=r.parameters)==null?void 0:u.docs,source:{originalSource:"args => <AddressSearch {...args} />",...(m=(_=r.parameters)==null?void 0:_.docs)==null?void 0:m.source}}};const N=["Default"];export{r as Default,N as __namedExportsOrder,b as default};
